"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.NotifyMention = void 0;
const appsync = require("@aws-cdk/aws-appsync-alpha");
const constructs_1 = require("constructs");
const path = require("path");
class NotifyMention extends constructs_1.Construct {
    constructor(scope, id, api, notificationsTable) {
        super(scope, id);
        this.api = api;
        this.notificationsTable = notificationsTable;
        this.resolver = this.NotifyMention();
    }
    NotifyMention() {
        // first arg should always be different!
        return this.api
            .addDynamoDbDataSource('MentionsNotificationsTable', this.notificationsTable)
            .createResolver({
            typeName: 'Mutation',
            fieldName: 'notifyMentioned',
            requestMappingTemplate: appsync.MappingTemplate.fromFile(path.join(__dirname, '../resolvers/mutations/NotifyMention/request.vtl')),
            responseMappingTemplate: appsync.MappingTemplate.fromFile(path.join(__dirname, '../resolvers/mutations/NotifyMention/response.vtl'))
        });
    }
}
exports.NotifyMention = NotifyMention;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTm90aWZ5TWVudGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIk5vdGlmeU1lbnRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQ0Esc0RBQXNEO0FBQ3RELDJDQUF1QztBQUN2Qyw2QkFBNkI7QUFDN0IsTUFBYSxhQUFjLFNBQVEsc0JBQVM7SUFJMUMsWUFDRSxLQUFnQixFQUNoQixFQUFVLEVBQ1YsR0FBdUIsRUFDdkIsa0JBQTBDO1FBRTFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDakIsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDZixJQUFJLENBQUMsa0JBQWtCLEdBQUcsa0JBQWtCLENBQUM7UUFDN0MsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDdkMsQ0FBQztJQUNNLGFBQWE7UUFDbEIsd0NBQXdDO1FBQ3hDLE9BQU8sSUFBSSxDQUFDLEdBQUc7YUFDWixxQkFBcUIsQ0FDcEIsNEJBQTRCLEVBQzVCLElBQUksQ0FBQyxrQkFBa0IsQ0FDeEI7YUFDQSxjQUFjLENBQUM7WUFDZCxRQUFRLEVBQUUsVUFBVTtZQUNwQixTQUFTLEVBQUUsaUJBQWlCO1lBQzVCLHNCQUFzQixFQUFFLE9BQU8sQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUN0RCxJQUFJLENBQUMsSUFBSSxDQUNQLFNBQVMsRUFDVCxrREFBa0QsQ0FDbkQsQ0FDRjtZQUNELHVCQUF1QixFQUFFLE9BQU8sQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUN2RCxJQUFJLENBQUMsSUFBSSxDQUNQLFNBQVMsRUFDVCxtREFBbUQsQ0FDcEQsQ0FDRjtTQUNGLENBQUMsQ0FBQztJQUNQLENBQUM7Q0FDRjtBQXZDRCxzQ0F1Q0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBjZGsgZnJvbSAnYXdzLWNkay1saWInO1xuaW1wb3J0ICogYXMgYXBwc3luYyBmcm9tICdAYXdzLWNkay9hd3MtYXBwc3luYy1hbHBoYSc7XG5pbXBvcnQgeyBDb25zdHJ1Y3QgfSBmcm9tICdjb25zdHJ1Y3RzJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5leHBvcnQgY2xhc3MgTm90aWZ5TWVudGlvbiBleHRlbmRzIENvbnN0cnVjdCB7XG4gIHB1YmxpYyBhcGk6IGFwcHN5bmMuR3JhcGhxbEFwaTtcbiAgcHVibGljIG5vdGlmaWNhdGlvbnNUYWJsZTogY2RrLmF3c19keW5hbW9kYi5UYWJsZTtcbiAgcHVibGljIHJlc29sdmVyOiBhcHBzeW5jLlJlc29sdmVyO1xuICBjb25zdHJ1Y3RvcihcbiAgICBzY29wZTogQ29uc3RydWN0LFxuICAgIGlkOiBzdHJpbmcsXG4gICAgYXBpOiBhcHBzeW5jLkdyYXBocWxBcGksXG4gICAgbm90aWZpY2F0aW9uc1RhYmxlOiBjZGsuYXdzX2R5bmFtb2RiLlRhYmxlXG4gICkge1xuICAgIHN1cGVyKHNjb3BlLCBpZCk7XG4gICAgdGhpcy5hcGkgPSBhcGk7XG4gICAgdGhpcy5ub3RpZmljYXRpb25zVGFibGUgPSBub3RpZmljYXRpb25zVGFibGU7XG4gICAgdGhpcy5yZXNvbHZlciA9IHRoaXMuTm90aWZ5TWVudGlvbigpO1xuICB9XG4gIHB1YmxpYyBOb3RpZnlNZW50aW9uKCkge1xuICAgIC8vIGZpcnN0IGFyZyBzaG91bGQgYWx3YXlzIGJlIGRpZmZlcmVudCFcbiAgICByZXR1cm4gdGhpcy5hcGlcbiAgICAgIC5hZGREeW5hbW9EYkRhdGFTb3VyY2UoXG4gICAgICAgICdNZW50aW9uc05vdGlmaWNhdGlvbnNUYWJsZScsXG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9uc1RhYmxlXG4gICAgICApXG4gICAgICAuY3JlYXRlUmVzb2x2ZXIoe1xuICAgICAgICB0eXBlTmFtZTogJ011dGF0aW9uJyxcbiAgICAgICAgZmllbGROYW1lOiAnbm90aWZ5TWVudGlvbmVkJyxcbiAgICAgICAgcmVxdWVzdE1hcHBpbmdUZW1wbGF0ZTogYXBwc3luYy5NYXBwaW5nVGVtcGxhdGUuZnJvbUZpbGUoXG4gICAgICAgICAgcGF0aC5qb2luKFxuICAgICAgICAgICAgX19kaXJuYW1lLFxuICAgICAgICAgICAgJy4uL3Jlc29sdmVycy9tdXRhdGlvbnMvTm90aWZ5TWVudGlvbi9yZXF1ZXN0LnZ0bCdcbiAgICAgICAgICApXG4gICAgICAgICksXG4gICAgICAgIHJlc3BvbnNlTWFwcGluZ1RlbXBsYXRlOiBhcHBzeW5jLk1hcHBpbmdUZW1wbGF0ZS5mcm9tRmlsZShcbiAgICAgICAgICBwYXRoLmpvaW4oXG4gICAgICAgICAgICBfX2Rpcm5hbWUsXG4gICAgICAgICAgICAnLi4vcmVzb2x2ZXJzL211dGF0aW9ucy9Ob3RpZnlNZW50aW9uL3Jlc3BvbnNlLnZ0bCdcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIH0pO1xuICB9XG59XG4iXX0=