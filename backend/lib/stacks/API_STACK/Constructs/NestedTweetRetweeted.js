"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.NestedTweetRetweeted = void 0;
const appsync = require("@aws-cdk/aws-appsync-alpha");
const path = require("path");
const constructs_1 = require("constructs");
class NestedTweetRetweeted extends constructs_1.Construct {
    constructor(scope, id, api, retweetsTable) {
        super(scope, id);
        this.api = api;
        this.retweetsTable = retweetsTable;
        this.resolver = this.createNestedTweetRetweetedResolver();
    }
    createNestedTweetRetweetedResolver() {
        return this.api
            .addDynamoDbDataSource('NestedTweetRetweetedDataSource', this.retweetsTable)
            .createResolver({
            typeName: 'Tweet',
            fieldName: 'retweeted',
            requestMappingTemplate: appsync.MappingTemplate.fromFile(path.join(__dirname, '../resolvers/query/Nested/Retweeted/request.vtl')),
            responseMappingTemplate: appsync.MappingTemplate.fromFile(path.join(__dirname, '../resolvers/query/Nested/Retweeted/response.vtl'))
        });
    }
}
exports.NestedTweetRetweeted = NestedTweetRetweeted;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTmVzdGVkVHdlZXRSZXR3ZWV0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJOZXN0ZWRUd2VldFJldHdlZXRlZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSxzREFBc0Q7QUFDdEQsNkJBQTZCO0FBQzdCLDJDQUF1QztBQUV2QyxNQUFhLG9CQUFxQixTQUFRLHNCQUFTO0lBS2pELFlBQ0UsS0FBZ0IsRUFDaEIsRUFBVSxFQUNWLEdBQXVCLEVBQ3ZCLGFBQXFDO1FBRXJDLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDakIsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDZixJQUFJLENBQUMsYUFBYSxHQUFHLGFBQWEsQ0FBQztRQUNuQyxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxrQ0FBa0MsRUFBRSxDQUFDO0lBQzVELENBQUM7SUFFTSxrQ0FBa0M7UUFDdkMsT0FBTyxJQUFJLENBQUMsR0FBRzthQUNaLHFCQUFxQixDQUNwQixnQ0FBZ0MsRUFDaEMsSUFBSSxDQUFDLGFBQWEsQ0FDbkI7YUFDQSxjQUFjLENBQUM7WUFDZCxRQUFRLEVBQUUsT0FBTztZQUNqQixTQUFTLEVBQUUsV0FBVztZQUN0QixzQkFBc0IsRUFBRSxPQUFPLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FDdEQsSUFBSSxDQUFDLElBQUksQ0FDUCxTQUFTLEVBQ1QsaURBQWlELENBQ2xELENBQ0Y7WUFDRCx1QkFBdUIsRUFBRSxPQUFPLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FDdkQsSUFBSSxDQUFDLElBQUksQ0FDUCxTQUFTLEVBQ1Qsa0RBQWtELENBQ25ELENBQ0Y7U0FDRixDQUFDLENBQUM7SUFDUCxDQUFDO0NBQ0Y7QUF4Q0Qsb0RBd0NDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgY2RrIGZyb20gJ2F3cy1jZGstbGliJztcbmltcG9ydCAqIGFzIGFwcHN5bmMgZnJvbSAnQGF3cy1jZGsvYXdzLWFwcHN5bmMtYWxwaGEnO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IENvbnN0cnVjdCB9IGZyb20gJ2NvbnN0cnVjdHMnO1xuXG5leHBvcnQgY2xhc3MgTmVzdGVkVHdlZXRSZXR3ZWV0ZWQgZXh0ZW5kcyBDb25zdHJ1Y3Qge1xuICBwdWJsaWMgYXBpOiBhcHBzeW5jLkdyYXBocWxBcGk7XG4gIHB1YmxpYyByZXR3ZWV0c1RhYmxlOiBjZGsuYXdzX2R5bmFtb2RiLlRhYmxlO1xuICBwdWJsaWMgcmVzb2x2ZXI6IGFwcHN5bmMuUmVzb2x2ZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgc2NvcGU6IENvbnN0cnVjdCxcbiAgICBpZDogc3RyaW5nLFxuICAgIGFwaTogYXBwc3luYy5HcmFwaHFsQXBpLFxuICAgIHJldHdlZXRzVGFibGU6IGNkay5hd3NfZHluYW1vZGIuVGFibGVcbiAgKSB7XG4gICAgc3VwZXIoc2NvcGUsIGlkKTtcbiAgICB0aGlzLmFwaSA9IGFwaTtcbiAgICB0aGlzLnJldHdlZXRzVGFibGUgPSByZXR3ZWV0c1RhYmxlO1xuICAgIHRoaXMucmVzb2x2ZXIgPSB0aGlzLmNyZWF0ZU5lc3RlZFR3ZWV0UmV0d2VldGVkUmVzb2x2ZXIoKTtcbiAgfVxuXG4gIHB1YmxpYyBjcmVhdGVOZXN0ZWRUd2VldFJldHdlZXRlZFJlc29sdmVyKCkge1xuICAgIHJldHVybiB0aGlzLmFwaVxuICAgICAgLmFkZER5bmFtb0RiRGF0YVNvdXJjZShcbiAgICAgICAgJ05lc3RlZFR3ZWV0UmV0d2VldGVkRGF0YVNvdXJjZScsXG4gICAgICAgIHRoaXMucmV0d2VldHNUYWJsZVxuICAgICAgKVxuICAgICAgLmNyZWF0ZVJlc29sdmVyKHtcbiAgICAgICAgdHlwZU5hbWU6ICdUd2VldCcsXG4gICAgICAgIGZpZWxkTmFtZTogJ3JldHdlZXRlZCcsXG4gICAgICAgIHJlcXVlc3RNYXBwaW5nVGVtcGxhdGU6IGFwcHN5bmMuTWFwcGluZ1RlbXBsYXRlLmZyb21GaWxlKFxuICAgICAgICAgIHBhdGguam9pbihcbiAgICAgICAgICAgIF9fZGlybmFtZSxcbiAgICAgICAgICAgICcuLi9yZXNvbHZlcnMvcXVlcnkvTmVzdGVkL1JldHdlZXRlZC9yZXF1ZXN0LnZ0bCdcbiAgICAgICAgICApXG4gICAgICAgICksXG4gICAgICAgIHJlc3BvbnNlTWFwcGluZ1RlbXBsYXRlOiBhcHBzeW5jLk1hcHBpbmdUZW1wbGF0ZS5mcm9tRmlsZShcbiAgICAgICAgICBwYXRoLmpvaW4oXG4gICAgICAgICAgICBfX2Rpcm5hbWUsXG4gICAgICAgICAgICAnLi4vcmVzb2x2ZXJzL3F1ZXJ5L05lc3RlZC9SZXR3ZWV0ZWQvcmVzcG9uc2UudnRsJ1xuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgfSk7XG4gIH1cbn1cbiJdfQ==