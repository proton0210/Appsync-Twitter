"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.NestedReplyProfile = void 0;
const appsync = require("@aws-cdk/aws-appsync-alpha");
const path = require("path");
const constructs_1 = require("constructs");
class NestedReplyProfile extends constructs_1.Construct {
    constructor(scope, id, api, usersTable) {
        super(scope, id);
        this.api = api;
        this.usersTable = usersTable;
        this.resolver = this.createNestedReplyProfileResolver();
    }
    createNestedReplyProfileResolver() {
        return this.api
            .addDynamoDbDataSource('NestedReplyProfileDataSource', this.usersTable)
            .createResolver({
            typeName: 'Reply',
            fieldName: 'profile',
            requestMappingTemplate: appsync.MappingTemplate.fromFile(path.join(__dirname, '../resolvers/query/Nested/ReplyProfile/request.vtl')),
            responseMappingTemplate: appsync.MappingTemplate.fromFile(path.join(__dirname, '../resolvers/query/Nested/ReplyProfile/response.vtl'))
        });
    }
}
exports.NestedReplyProfile = NestedReplyProfile;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTmVzdGVkUmVwbHlQcm9maWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiTmVzdGVkUmVwbHlQcm9maWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLHNEQUFzRDtBQUN0RCw2QkFBNkI7QUFDN0IsMkNBQXVDO0FBRXZDLE1BQWEsa0JBQW1CLFNBQVEsc0JBQVM7SUFLL0MsWUFDRSxLQUFnQixFQUNoQixFQUFVLEVBQ1YsR0FBdUIsRUFDdkIsVUFBa0M7UUFFbEMsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNqQixJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUNmLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO1FBQzdCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLGdDQUFnQyxFQUFFLENBQUM7SUFDMUQsQ0FBQztJQUVNLGdDQUFnQztRQUNyQyxPQUFPLElBQUksQ0FBQyxHQUFHO2FBQ1oscUJBQXFCLENBQUMsOEJBQThCLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQzthQUN0RSxjQUFjLENBQUM7WUFDZCxRQUFRLEVBQUUsT0FBTztZQUNqQixTQUFTLEVBQUUsU0FBUztZQUNwQixzQkFBc0IsRUFBRSxPQUFPLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FDdEQsSUFBSSxDQUFDLElBQUksQ0FDUCxTQUFTLEVBQ1Qsb0RBQW9ELENBQ3JELENBQ0Y7WUFDRCx1QkFBdUIsRUFBRSxPQUFPLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FDdkQsSUFBSSxDQUFDLElBQUksQ0FDUCxTQUFTLEVBQ1QscURBQXFELENBQ3RELENBQ0Y7U0FDRixDQUFDLENBQUM7SUFDUCxDQUFDO0NBQ0Y7QUFyQ0QsZ0RBcUNDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgY2RrIGZyb20gJ2F3cy1jZGstbGliJztcbmltcG9ydCAqIGFzIGFwcHN5bmMgZnJvbSAnQGF3cy1jZGsvYXdzLWFwcHN5bmMtYWxwaGEnO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IENvbnN0cnVjdCB9IGZyb20gJ2NvbnN0cnVjdHMnO1xuXG5leHBvcnQgY2xhc3MgTmVzdGVkUmVwbHlQcm9maWxlIGV4dGVuZHMgQ29uc3RydWN0IHtcbiAgcHVibGljIGFwaTogYXBwc3luYy5HcmFwaHFsQXBpO1xuICBwdWJsaWMgdXNlcnNUYWJsZTogY2RrLmF3c19keW5hbW9kYi5UYWJsZTtcbiAgcHVibGljIHJlc29sdmVyOiBhcHBzeW5jLlJlc29sdmVyO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHNjb3BlOiBDb25zdHJ1Y3QsXG4gICAgaWQ6IHN0cmluZyxcbiAgICBhcGk6IGFwcHN5bmMuR3JhcGhxbEFwaSxcbiAgICB1c2Vyc1RhYmxlOiBjZGsuYXdzX2R5bmFtb2RiLlRhYmxlXG4gICkge1xuICAgIHN1cGVyKHNjb3BlLCBpZCk7XG4gICAgdGhpcy5hcGkgPSBhcGk7XG4gICAgdGhpcy51c2Vyc1RhYmxlID0gdXNlcnNUYWJsZTtcbiAgICB0aGlzLnJlc29sdmVyID0gdGhpcy5jcmVhdGVOZXN0ZWRSZXBseVByb2ZpbGVSZXNvbHZlcigpO1xuICB9XG5cbiAgcHVibGljIGNyZWF0ZU5lc3RlZFJlcGx5UHJvZmlsZVJlc29sdmVyKCkge1xuICAgIHJldHVybiB0aGlzLmFwaVxuICAgICAgLmFkZER5bmFtb0RiRGF0YVNvdXJjZSgnTmVzdGVkUmVwbHlQcm9maWxlRGF0YVNvdXJjZScsIHRoaXMudXNlcnNUYWJsZSlcbiAgICAgIC5jcmVhdGVSZXNvbHZlcih7XG4gICAgICAgIHR5cGVOYW1lOiAnUmVwbHknLFxuICAgICAgICBmaWVsZE5hbWU6ICdwcm9maWxlJyxcbiAgICAgICAgcmVxdWVzdE1hcHBpbmdUZW1wbGF0ZTogYXBwc3luYy5NYXBwaW5nVGVtcGxhdGUuZnJvbUZpbGUoXG4gICAgICAgICAgcGF0aC5qb2luKFxuICAgICAgICAgICAgX19kaXJuYW1lLFxuICAgICAgICAgICAgJy4uL3Jlc29sdmVycy9xdWVyeS9OZXN0ZWQvUmVwbHlQcm9maWxlL3JlcXVlc3QudnRsJ1xuICAgICAgICAgIClcbiAgICAgICAgKSxcbiAgICAgICAgcmVzcG9uc2VNYXBwaW5nVGVtcGxhdGU6IGFwcHN5bmMuTWFwcGluZ1RlbXBsYXRlLmZyb21GaWxlKFxuICAgICAgICAgIHBhdGguam9pbihcbiAgICAgICAgICAgIF9fZGlybmFtZSxcbiAgICAgICAgICAgICcuLi9yZXNvbHZlcnMvcXVlcnkvTmVzdGVkL1JlcGx5UHJvZmlsZS9yZXNwb25zZS52dGwnXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICB9KTtcbiAgfVxufVxuIl19