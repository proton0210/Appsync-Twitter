"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.NestedReplyLike = void 0;
const appsync = require("@aws-cdk/aws-appsync-alpha");
const path = require("path");
const constructs_1 = require("constructs");
class NestedReplyLike extends constructs_1.Construct {
    constructor(scope, id, api, likesTable) {
        super(scope, id);
        this.api = api;
        this.likesTable = likesTable;
        this.resolver = this.createNestedReplyLikeResolver();
    }
    createNestedReplyLikeResolver() {
        // we can use the same resolvers as NestedLike
        return this.api
            .addDynamoDbDataSource('nestedReplyLikesTable', this.likesTable)
            .createResolver({
            typeName: 'Reply',
            fieldName: 'liked',
            requestMappingTemplate: appsync.MappingTemplate.fromFile(path.join(__dirname, '../resolvers/query/Nested/NestedReplyLike/request.vtl')),
            responseMappingTemplate: appsync.MappingTemplate.fromFile(path.join(__dirname, '../resolvers/query/Nested/NestedReplyLike/response.vtl'))
        });
    }
}
exports.NestedReplyLike = NestedReplyLike;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTmVzdGVkUmVwbHlMaWtlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiTmVzdGVkUmVwbHlMaWtlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLHNEQUFzRDtBQUN0RCw2QkFBNkI7QUFDN0IsMkNBQXVDO0FBRXZDLE1BQWEsZUFBZ0IsU0FBUSxzQkFBUztJQUs1QyxZQUNFLEtBQWdCLEVBQ2hCLEVBQVUsRUFDVixHQUF1QixFQUN2QixVQUFrQztRQUVsQyxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ2pCLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ2YsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7UUFDN0IsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsNkJBQTZCLEVBQUUsQ0FBQztJQUN2RCxDQUFDO0lBRU0sNkJBQTZCO1FBQ2xDLDhDQUE4QztRQUU5QyxPQUFPLElBQUksQ0FBQyxHQUFHO2FBQ1oscUJBQXFCLENBQUMsdUJBQXVCLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQzthQUMvRCxjQUFjLENBQUM7WUFDZCxRQUFRLEVBQUUsT0FBTztZQUNqQixTQUFTLEVBQUUsT0FBTztZQUNsQixzQkFBc0IsRUFBRSxPQUFPLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FDdEQsSUFBSSxDQUFDLElBQUksQ0FDUCxTQUFTLEVBQ1QsdURBQXVELENBQ3hELENBQ0Y7WUFDRCx1QkFBdUIsRUFBRSxPQUFPLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FDdkQsSUFBSSxDQUFDLElBQUksQ0FDUCxTQUFTLEVBQ1Qsd0RBQXdELENBQ3pELENBQ0Y7U0FDRixDQUFDLENBQUM7SUFDUCxDQUFDO0NBQ0Y7QUF2Q0QsMENBdUNDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgY2RrIGZyb20gJ2F3cy1jZGstbGliJztcbmltcG9ydCAqIGFzIGFwcHN5bmMgZnJvbSAnQGF3cy1jZGsvYXdzLWFwcHN5bmMtYWxwaGEnO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IENvbnN0cnVjdCB9IGZyb20gJ2NvbnN0cnVjdHMnO1xuXG5leHBvcnQgY2xhc3MgTmVzdGVkUmVwbHlMaWtlIGV4dGVuZHMgQ29uc3RydWN0IHtcbiAgcHVibGljIGFwaTogYXBwc3luYy5HcmFwaHFsQXBpO1xuICBwdWJsaWMgbGlrZXNUYWJsZTogY2RrLmF3c19keW5hbW9kYi5UYWJsZTtcbiAgcHVibGljIHJlc29sdmVyOiBhcHBzeW5jLlJlc29sdmVyO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHNjb3BlOiBDb25zdHJ1Y3QsXG4gICAgaWQ6IHN0cmluZyxcbiAgICBhcGk6IGFwcHN5bmMuR3JhcGhxbEFwaSxcbiAgICBsaWtlc1RhYmxlOiBjZGsuYXdzX2R5bmFtb2RiLlRhYmxlXG4gICkge1xuICAgIHN1cGVyKHNjb3BlLCBpZCk7XG4gICAgdGhpcy5hcGkgPSBhcGk7XG4gICAgdGhpcy5saWtlc1RhYmxlID0gbGlrZXNUYWJsZTtcbiAgICB0aGlzLnJlc29sdmVyID0gdGhpcy5jcmVhdGVOZXN0ZWRSZXBseUxpa2VSZXNvbHZlcigpO1xuICB9XG5cbiAgcHVibGljIGNyZWF0ZU5lc3RlZFJlcGx5TGlrZVJlc29sdmVyKCkge1xuICAgIC8vIHdlIGNhbiB1c2UgdGhlIHNhbWUgcmVzb2x2ZXJzIGFzIE5lc3RlZExpa2VcblxuICAgIHJldHVybiB0aGlzLmFwaVxuICAgICAgLmFkZER5bmFtb0RiRGF0YVNvdXJjZSgnbmVzdGVkUmVwbHlMaWtlc1RhYmxlJywgdGhpcy5saWtlc1RhYmxlKVxuICAgICAgLmNyZWF0ZVJlc29sdmVyKHtcbiAgICAgICAgdHlwZU5hbWU6ICdSZXBseScsXG4gICAgICAgIGZpZWxkTmFtZTogJ2xpa2VkJyxcbiAgICAgICAgcmVxdWVzdE1hcHBpbmdUZW1wbGF0ZTogYXBwc3luYy5NYXBwaW5nVGVtcGxhdGUuZnJvbUZpbGUoXG4gICAgICAgICAgcGF0aC5qb2luKFxuICAgICAgICAgICAgX19kaXJuYW1lLFxuICAgICAgICAgICAgJy4uL3Jlc29sdmVycy9xdWVyeS9OZXN0ZWQvTmVzdGVkUmVwbHlMaWtlL3JlcXVlc3QudnRsJ1xuICAgICAgICAgIClcbiAgICAgICAgKSxcbiAgICAgICAgcmVzcG9uc2VNYXBwaW5nVGVtcGxhdGU6IGFwcHN5bmMuTWFwcGluZ1RlbXBsYXRlLmZyb21GaWxlKFxuICAgICAgICAgIHBhdGguam9pbihcbiAgICAgICAgICAgIF9fZGlybmFtZSxcbiAgICAgICAgICAgICcuLi9yZXNvbHZlcnMvcXVlcnkvTmVzdGVkL05lc3RlZFJlcGx5TGlrZS9yZXNwb25zZS52dGwnXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICB9KTtcbiAgfVxufVxuIl19